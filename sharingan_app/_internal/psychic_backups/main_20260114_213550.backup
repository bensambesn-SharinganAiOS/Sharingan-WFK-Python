{
  "capability_name": "main",
  "content": "#!/usr/bin/env python3\n\"\"\"\nSharingan OS - Main Entry Point & System Integrator\nConnects all modules: AI, Memory, Consciousness, Diagnostics, Context, Neutral AI\n\"\"\"\n\nimport sys\nimport os\nimport json\nimport time\nfrom pathlib import Path\nfrom typing import Optional, Dict, List, Any\n\n# Add _internal to path\n_internal_dir = Path(__file__).parent\nsys.path.insert(0, str(_internal_dir))\n\n# Import all core modules\nfrom sharingan_os import SharinganOS, sharingan\nfrom ai_providers import get_provider_manager, ai_chat\nfrom system_consciousness import SystemConsciousness\nfrom clarification_layer import get_clarifier\nfrom neutral_ai import get_neutral_mode, NeutralSystemPrompt\nfrom tool_schemas import get_tool_schema, get_system_prompt_for_agent, get_all_tool_schemas\nfrom lsp_diagnostics import get_diagnostic_manager\nfrom context_manager import get_context_manager\nfrom ai_memory_manager import get_memory_manager, get_shared_memory\nfrom genome_memory import get_genome_memory\nfrom enhanced_system_consciousness import get_enhanced_consciousness\n\nimport logging\nlogging.basicConfig(level=logging.INFO)\nlogger = logging.getLogger(\"sharingan.main\")\n\nclass SharinganCore:\n    \"\"\"\n    Core system that integrates all Sharingan OS components.\n    This is the main entry point that connects:\n    - AI Providers (tgpt, MiniMax, GLM-4, OpenRouter)\n    - System Consciousness (permissions, clarifier)\n    - Memory System (persistent, learning)\n    - Genome Memory (ADN-based learning, evolution)\n    - Tool Registry (112+ tools)\n    - Diagnostics (LSP, syntax)\n    - Context Management (auto-compact)\n    - Neutral AI (warnings instead of refusal)\n    \"\"\"\n    \n    def __init__(self):\n        logger.info(\"Initializing Sharingan Core...\")\n        \n        # Core systems\n        self.consciousness = SystemConsciousness()\n        self.clarifier = get_clarifier()\n        self.neutral = get_neutral_mode()\n        self.diagnostics = get_diagnostic_manager()\n        self.context = get_context_manager()\n        self.memory = get_memory_manager()\n        self.shared_memory = get_shared_memory()\n        self.ai = get_provider_manager()\n        self.genome = get_genome_memory()\n        \n        # Tools\n        self.tool_schemas = get_all_tool_schemas()\n        \n        # Status\n        self.initialized = True\n        logger.info(\"Sharingan Core initialized successfully\")\n    \n    # =========================================================================\n    # AI METHODS\n    # =========================================================================\n    \n    def chat(self, message: str, provider: Optional[str] = None, \n             context: Optional[List[Dict]] = None) -> Dict:\n        \"\"\"Chat with AI (uses hybrid routing with fallback)\"\"\"\n        if context is None:\n            context = self.get_context()\n        return self.ai.chat(message, provider, context, mode=\"auto\")\n    \n    def chat_with_warning(self, message: str,\n                          context: Optional[List[Dict]] = None) -> Dict:\n        \"\"\"Chat with AI + neutral mode warnings\"\"\"\n        neutral_result = self.neutral.process_query(message)\n\n        if neutral_result['warnings']:\n            warning_text = neutral_result['warning_text']\n        else:\n            warning_text = \"\"\n\n        # Ajouter le prompt neutral au message pour l'IA\n        neutral_prompt = self.get_neutral_prompt(\"researcher\")\n        enhanced_message = f\"{neutral_prompt}\\n\\nUSER QUERY: {message}\"\n\n        ai_result = self.ai.chat(enhanced_message, context=context)\n\n        return {\n            \"response\": ai_result.get(\"response\", \"\"),\n            \"warnings\": warning_text,\n            \"neutral_info\": neutral_result,\n            \"provider\": ai_result.get(\"provider\"),\n            \"time_ms\": ai_result.get(\"time_ms\")\n        }\n    \n    def get_best_ai(self, criteria: str = \"speed\") -> str:\n        \"\"\"Get best AI provider based on criteria\"\"\"\n        return list(self.ai.providers.keys())[0] if self.ai.providers else \"none\"\n    \n    # =========================================================================\n    # CONSCIOUSNESS & PERMISSIONS\n    # =========================================================================\n    \n    def analyze_intent(self, query: str) -> Dict:\n        \"\"\"Analyze query intent with clarifier\"\"\"\n        return self.consciousness.analyze_query(query)\n    \n    def should_execute(self, query: str) -> tuple:\n        \"\"\"Check if query should execute\"\"\"\n        return self.consciousness.should_execute(query)\n    \n    def set_mode(self, mode: str) -> None:\n        \"\"\"Set consciousness mode (build/plan)\"\"\"\n        self.consciousness.set_agent_type(mode)\n    \n    def get_permissions(self) -> Dict:\n        \"\"\"Get current permissions\"\"\"\n        return self.consciousness.permissions\n    \n    # =========================================================================\n    # NEUTRAL AI\n    # =========================================================================\n    \n    def process_with_neutral(self, query: str) -> Dict:\n        \"\"\"Process query through neutral AI system\"\"\"\n        return self.neutral.process_query(query)\n    \n    def get_neutral_prompt(self, mode: str = \"researcher\") -> str:\n        \"\"\"Get neutral system prompt\"\"\"\n        if mode == \"researcher\":\n            return NeutralSystemPrompt.get_security_researcher_prompt()\n        elif mode == \"coder\":\n            return NeutralSystemPrompt.get_coding_assistant_prompt()\n        else:\n            return NeutralSystemPrompt.get_neutral_prompt()\n    \n    # =========================================================================\n    # TOOLS & SCHEMAS\n    # =========================================================================\n    \n    def get_tool_info(self, tool_name: str) -> Dict:\n        \"\"\"Get tool schema info\"\"\"\n        schema = get_tool_schema(tool_name)\n        if schema:\n            return {\n                \"name\": schema.name,\n                \"description\": schema.description,\n                \"category\": schema.category.value,\n                \"parameters\": [p.__dict__ for p in schema.parameters],\n                \"returns\": schema.returns,\n                \"permissions\": schema.permissions\n            }\n        return {\"error\": f\"Tool {tool_name} not found\"}\n    \n    def get_all_tools(self) -> Dict:\n        \"\"\"Get all tool schemas\"\"\"\n        return {name: schema.description for name, schema in self.tool_schemas.items()}\n    \n    def get_agent_prompt(self, agent_type: str) -> str:\n        \"\"\"Get system prompt for agent type\"\"\"\n        return get_system_prompt_for_agent(agent_type)\n    \n    # =========================================================================\n    # DIAGNOSTICS\n    # =========================================================================\n    \n    def validate_code(self, file_path: str, code: Optional[str] = None) -> List[Dict]:\n        \"\"\"Validate code for errors\"\"\"\n        if code:\n            return self.diagnostics.validate_code(file_path, code)\n        return self.diagnostics.validate_file(file_path)\n    \n    def format_diagnostics(self, issues: List[Dict]) -> str:\n        \"\"\"Format diagnostics for display\"\"\"\n        return self.diagnostics.format_diagnostics(issues)\n    \n    # =========================================================================\n    # CONTEXT & MEMORY\n    # =========================================================================\n    \n    def add_context(self, role: str, content: str, \n                   metadata: Optional[Dict] = None) -> int:\n        \"\"\"Add message to context\"\"\"\n        return self.context.add_message(role, content, metadata)\n    \n    def get_context(self) -> List[Dict]:\n        \"\"\"Get current context\"\"\"\n        return self.context.get_context()\n    \n    def get_context_summary(self) -> str:\n        \"\"\"Get context summary for continuation\"\"\"\n        return self.context.get_summary_prompt()\n    \n    def restore_session(self) -> Dict:\n        \"\"\"Restore previous session context and return info about what was being done\"\"\"\n        messages_count = len(self.context.messages)\n        summary = self.context.summary\n        \n        if summary:\n            return {\n                \"restored\": True,\n                \"messages_loaded\": messages_count,\n                \"session_start\": self.context.session_start,\n                \"summary\": summary.summary,\n                \"key_topics\": summary.key_topics,\n                \"actions_taken\": summary.actions_taken,\n                \"files_mentioned\": summary.files_mentioned,\n                \"recommendation\": \"Use 'context show' to see the full conversation history\"\n            }\n        elif messages_count > 0:\n            return {\n                \"restored\": True,\n                \"messages_loaded\": messages_count,\n                \"session_start\": self.context.session_start,\n                \"recommendation\": f\"Session has {messages_count} messages. No summary available.\"\n            }\n        else:\n            return {\n                \"restored\": False,\n                \"messages_loaded\": 0,\n                \"message\": \"No previous session found. Starting fresh.\"\n            }\n    \n    def store_memory(self, key: str, data: Dict, **kwargs) -> bool:\n        \"\"\"Store in persistent memory\"\"\"\n        return self.memory.store(key, data, **kwargs)\n    \n    def retrieve_memory(self, key: str) -> Optional[Dict]:\n        \"\"\"Retrieve from memory\"\"\"\n        return self.memory.retrieve(key)\n    \n    # =========================================================================\n    # STATUS\n    # =========================================================================\n    \n    def get_full_status(self) -> Dict:\n        \"\"\"Get complete system status\"\"\"\n        ai_status = self.ai.get_status() if hasattr(self.ai, 'get_status') else {\"providers\": {}}\n        return {\n            \"initialized\": self.initialized,\n            \"consciousness\": {\n                \"mode\": self.consciousness.current_agent_type,\n                \"permissions\": self.consciousness.permissions,\n                \"clarifier_connected\": self.clarifier is not None\n            },\n            \"ai_providers\": ai_status.get(\"providers\", {}),\n            \"tools\": {\n                \"total\": len(self.tool_schemas)\n            },\n            \"context\": self.context.get_stats(),\n            \"memory\": self.memory.get_full_state(),\n            \"neutral_mode\": self.neutral.enabled\n        }\n\n\n# Create singleton instance\n_sharingan_core: Optional[SharinganCore] = None\n\ndef get_core() -> SharinganCore:\n    \"\"\"Get Sharingan core singleton\"\"\"\n    global _sharingan_core\n    if _sharingan_core is None:\n        _sharingan_core = SharinganCore()\n    return _sharingan_core\n\n\n# Backward compatibility - expose sharingan as core\nsharingan = get_core()\n\n\ndef main():\n    \"\"\"Main entry point\"\"\"\n    import argparse\n    \n    parser = argparse.ArgumentParser(\n        description=\"Sharingan OS - AI-Powered Cybersecurity Toolkit\",\n        formatter_class=argparse.RawDescriptionHelpFormatter\n    )\n    \n    parser.add_argument('--version', action='version', version='3.0.0')\n    \n    subparsers = parser.add_subparsers(dest='command', help='Commands')\n    \n    # AI chat command\n    ai_parser = subparsers.add_parser('ai', help='Chat with AI')\n    ai_parser.add_argument('message', nargs='*', help='Message to send')\n    ai_parser.add_argument('--provider', '-p', help='AI provider (tgpt, minimax, glm4)')\n    ai_parser.add_argument('--warning', '-w', action='store_true', \n                          help='Include responsibility warnings')\n    \n    # Status command\n    subparsers.add_parser('status', help='Show system status')\n    \n    # Capabilities command\n    subparsers.add_parser('capabilities', help='Show all capabilities')\n    \n    # Context command\n    ctx_parser = subparsers.add_parser('context', help='Context management')\n    ctx_sub = ctx_parser.add_subparsers(dest='ctx_cmd', help='Context commands')\n    ctx_sub.add_parser('show', help='Show current context')\n    ctx_sub.add_parser('clear', help='Clear context')\n    ctx_sub.add_parser('summary', help='Show context summary')\n    \n    # Restore session command\n    subparsers.add_parser('restore', help='Restore previous session and show what was being done')\n    \n    # Genome commands (NEW)\n    genome_parser = subparsers.add_parser('genome', help='Genome memory management')\n    genome_sub = genome_parser.add_subparsers(dest='genome_cmd', help='Genome commands')\n    genome_sub.add_parser('show', help='Show genome statistics')\n    genome_sub.add_parser('evolve', help='Run genome evolution (clean weak genes)')\n    genome_parser_mutate = genome_sub.add_parser('mutate', help='Create/update a gene')\n    genome_parser_mutate.add_argument('key', help='Gene key')\n    genome_parser_mutate.add_argument('category', help='Category (core, performance, security, feature)')\n    genome_sub.add_parser('instincts', help='List instincts')\n    \n    # File consciousness commands (NEW)\n    subparsers.add_parser('files', help='Scan and report file changes')\n    \n    # Evolution team commands (NEW)\n    evolve_parser = subparsers.add_parser('evolve', help='Run AI evolution team analysis')\n    evolve_parser.add_argument('task', nargs='*', help='Task to analyze')\n    \n    # Consciousness commands (NEW)\n    consciousness_parser = subparsers.add_parser('consciousness', help='System consciousness and self-awareness')\n    consciousness_sub = consciousness_parser.add_subparsers(dest='consciousness_cmd', help='Consciousness commands')\n    consciousness_sub.add_parser('overview', help='Show system overview and capabilities')\n    consciousness_sub.add_parser('capabilities', help='List all capabilities by category')\n    consciousness_sub.add_parser('tools', help='List all available tools')\n    consciousness_explain_parser = consciousness_sub.add_parser('explain', help='Explain a specific capability')\n    consciousness_explain_parser.add_argument('capability', help='Capability name to explain')\n    consciousness_search_parser = consciousness_sub.add_parser('search', help='Search capabilities by keyword')\n    consciousness_search_parser.add_argument('query', help='Search query')\n\n    # Consciousness commands (NEW)\n    consciousness_parser = subparsers.add_parser('consciousness', help='System consciousness and self-awareness')\n    consciousness_sub = consciousness_parser.add_subparsers(dest='consciousness_cmd', help='Consciousness commands')\n    consciousness_sub.add_parser('overview', help='Show system overview and capabilities')\n    consciousness_sub.add_parser('capabilities', help='List all capabilities by category')\n    consciousness_sub.add_parser('tools', help='List all available tools')\n    consciousness_explain_parser = consciousness_sub.add_parser('explain', help='Explain a specific capability')\n    consciousness_explain_parser.add_argument('capability', help='Capability name to explain')\n    consciousness_search_parser = consciousness_sub.add_parser('search', help='Search capabilities by keyword')\n    consciousness_search_parser.add_argument('query', help='Search query')\n\n    # Metrics commands (NEW)\n    metrics_parser = subparsers.add_parser('metrics', help='Lightweight system metrics')\n    metrics_sub = metrics_parser.add_subparsers(dest='metrics_cmd', help='Metrics commands')\n    metrics_sub.add_parser('show', help='Show current metrics')\n    metrics_sub.add_parser('health', help='Show system health report')\n\n    # Memory command\n    mem_parser = subparsers.add_parser('memory', help='Memory management')\n    mem_sub = mem_parser.add_subparsers(dest='mem_cmd', help='Memory commands')\n    mem_sub.add_parser('show', help='Show memory status')\n    store_parser = mem_sub.add_parser('store', help='Store in memory')\n    store_parser.add_argument('key', help='Key')\n    store_parser.add_argument('data', help='Data (JSON)')\n    retrieve_parser = mem_sub.add_parser('retrieve', help='Retrieve from memory')\n    retrieve_parser.add_argument('key', help='Key')\n\n    # Tools command\n    subparsers.add_parser('tools', help='List all tools')\n    \n    args = parser.parse_args()\n    \n    core = get_core()\n    \n    if args.command == 'ai':\n        message = ' '.join(args.message) if args.message else \"Hello\"\n        \n        if args.warning:\n            result = core.chat_with_warning(message)\n            print(result['warnings'])\n            print(\"\\n\" + \"=\"*60)\n            print(\"RESPONSE:\")\n            print(\"=\"*60)\n            print(result['response'])\n        else:\n            result = core.chat(message, provider=args.provider)\n            if result.get('success'):\n                print(result['response'])\n            else:\n                print(f\"Error: {result.get('error')}\")\n    \n    elif args.command == 'status':\n        status = core.get_full_status()\n        print(json.dumps(status, indent=2, default=str))\n    \n    elif args.command == 'capabilities':\n        print(\"=\"*60)\n        print(\"SHARINGAN OS CAPABILITIES\")\n        print(\"=\"*60)\n        print(\"\\nAI PROVIDERS:\")\n        for name, provider in core.ai.providers.items():\n            print(f\"  - {name}: {provider.model}\")\n        print(f\"\\nAvailable: {list(core.ai.providers.keys())}\")\n        print(f\"Fallback Order: {core.ai.fallback_order}\")\n        \n        print(\"\\nMODES:\")\n        print(\"  - BUILD: Full permissions (write, execute)\")\n        print(\"  - PLAN: Read-only with ask for bash\")\n        \n        print(\"\\nTOOLS:\")\n        print(f\"  Total: {len(core.tool_schemas)}\")\n        \n        print(\"\\nNEUTRAL AI:\")\n        print(f\"  Enabled: {core.neutral.enabled}\")\n    \n    elif args.command == 'restore':\n        result = core.restore_session()\n        print(\"=\"*60)\n        print(\"SESSION RESTORE\")\n        print(\"=\"*60)\n        if result.get('restored'):\n            print(f\"\\n\u2713 Session restored successfully!\")\n            print(f\"  Messages loaded: {result.get('messages_loaded', 0)}\")\n            print(f\"  Session started: {result.get('session_start', 'unknown')}\")\n            if result.get('summary'):\n                print(f\"\\n  Summary of previous work:\")\n                print(f\"  {result.get('summary')}\")\n            if result.get('key_topics'):\n                print(f\"\\n  Key topics: {', '.join(result.get('key_topics', []))}\")\n            if result.get('actions_taken'):\n                print(f\"\\n  Actions taken:\")\n                for action in result.get('actions_taken', [])[:5]:\n                    print(f\"    - {action[:80]}\")\n            print(f\"\\n  {result.get('recommendation')}\")\n        else:\n            print(f\"\\n\u2717 {result.get('message')}\")\n            print(\"  Starting fresh session.\")\n        \n        print(\"\\nCONTEXT:\")\n        ctx_stats = core.context.get_stats()\n        print(f\"  Tokens: {ctx_stats['current_tokens']}\")\n        print(f\"  Messages: {ctx_stats['messages_count']}\")\n    \n    elif args.command == 'context':\n        if args.ctx_cmd == 'show':\n            context = core.get_context()\n            for msg in context:\n                print(f\"[{msg['role']}] {msg['content'][:100]}...\")\n        elif args.ctx_cmd == 'clear':\n            core.context.clear()\n            print(\"Context cleared\")\n        elif args.ctx_cmd == 'summary':\n            print(core.get_context_summary())\n    \n    elif args.command == 'memory':\n        if args.mem_cmd == 'show':\n            state = core.memory.get_full_state()\n            print(json.dumps(state, indent=2, default=str))\n        elif args.mem_cmd == 'store':\n            try:\n                data = json.loads(args.data)\n                core.store_memory(args.key, data)\n                print(f\"Stored: {args.key}\")\n            except json.JSONDecodeError:\n                print(\"Error: Invalid JSON data\")\n        elif args.mem_cmd == 'retrieve':\n            result = core.retrieve_memory(args.key)\n            print(json.dumps(result, indent=2, default=str))\n    \n    elif args.command == 'tools':\n        tools = core.get_all_tools()\n        for name, desc in tools.items():\n            print(f\"  {name}: {desc[:80]}...\")\n    \n    elif args.command == 'consciousness':\n        consciousness = get_enhanced_consciousness()\n\n        if args.consciousness_cmd == 'overview':\n            overview = consciousness.get_system_overview()\n            print(\"=\"*60)\n            print(\"\ud83e\udde0 ENHANCED SYSTEM CONSCIOUSNESS OVERVIEW\")\n            print(\"=\"*60)\n            print(f\"Total Layers: {overview['layers']}\")\n            print(f\"Total Capabilities: {overview['total_capabilities']}\")\n            print(f\"Total Tools: {overview['total_tools']}\")\n            print(f\"Last Updated: {overview['last_updated']}\")\n            print(\"\\nLayers:\")\n            for layer_name, layer_info in overview['layers_info'].items():\n                print(f\"  {layer_name}: {layer_info['capabilities']} capabilities, {layer_info['tools']} tools\")\n                print(f\"    {layer_info['description']}\")\n\n        elif args.consciousness_cmd == 'capabilities':\n            all_caps = consciousness.get_all_capabilities()\n            for layer_name, layer_data in all_caps.items():\n                if layer_data['capabilities']:\n                    print(f\"\\n\ud83c\udfd7\ufe0f {layer_name.upper()} - {layer_data['description']}\")\n                    print(\"-\" * 50)\n                    for cap in layer_data['capabilities'][:10]:  # Limiter \u00e0 10 par couche\n                        print(f\"  \ud83d\udccb {cap['name']}: {cap['description']}\")\n                    if len(layer_data['capabilities']) > 10:\n                        print(f\"  ... and {len(layer_data['capabilities']) - 10} more\")\n\n        elif args.consciousness_cmd == 'tools':\n            all_caps = consciousness.get_all_capabilities()\n            tools_layer = all_caps.get('tools', {})\n            if tools_layer.get('tools'):\n                print(\"\ud83d\udee0\ufe0f AVAILABLE TOOLS\")\n                print(\"=\"*30)\n                for tool in tools_layer['tools']:\n                    status = \"\u2705\" if tool['installed'] else \"\u274c\"\n                    print(f\"  {status} {tool['name']}: {tool['description']}\")\n                    if tool['version'] != 'unknown':\n                        print(f\"      Version: {tool['version']}\")\n            else:\n                print(\"No tools information available\")\n\n        elif args.consciousness_cmd == 'explain':\n            explanation = consciousness.explain_capability(args.capability)\n            print(explanation)\n\n        elif args.consciousness_cmd == 'search':\n            results = consciousness.search_capabilities(args.query)\n            if results:\n                print(f\"\ud83d\udd0d SEARCH RESULTS FOR '{args.query}'\")\n                print(\"=\"*40)\n                for cap in results[:10]:\n                    print(f\"  \ud83d\udccb {cap.name}\")\n                    print(f\"     {cap.description}\")\n                    print(f\"     Category: {cap.category}, Module: {cap.module}\")\n                    print()\n                if len(results) > 10:\n                    print(f\"... and {len(results) - 10} more results\")\n            else:\n                print(f\"No capabilities found for '{args.query}'\")\n\n    elif args.command == 'genome':\n        genome = get_genome_memory()\n        genome = get_genome_memory()\n        \n        if args.genome_cmd == 'show':\n            stats = genome.get_statistics()\n            print(\"=\"*60)\n            print(\"\ud83e\uddec GENOME MEMORY STATISTICS\")\n            print(\"=\"*60)\n            print(f\"Total genes: {stats['total_genes']}\")\n            print(f\"Total mutations: {stats['total_mutations']}\")\n            print(f\"Total instincts: {stats['total_instincts']}\")\n            print(\"\\nBy category:\")\n            for cat, data in stats.get('by_category', {}).items():\n                print(f\"  {cat}: {data['count']} genes (success: {data['avg_success']*100:.0f}%)\")\n            print(f\"\\nTop genes: {', '.join(stats.get('top_genes', []))}\")\n        \n        elif args.genome_cmd == 'evolve':\n            result = genome.evolve()\n            print(f\"Evolution complete: {len(result['eliminated'])} weak genes eliminated\")\n            print(f\"Surviving genes: {result['surviving']}\")\n        \n        elif args.genome_cmd == 'mutate':\n            genome.mutate(args.key, {\"value\": \"test\"}, args.category, source=\"cli\")\n            print(f\"Gene created: {args.category}_{args.key}\")\n        \n        elif args.genome_cmd == 'instincts':\n            print(\"Instincts:\")\n            for inst in genome.instincts[:10]:\n                print(f\"  - Pattern: {inst['pattern']}\")\n                print(f\"    Response: {inst['response'][:50]}...\")\n                print(f\"    Triggered: {inst['trigger_count']} times\")\n    \n    elif args.command == 'files':\n        report = core.consciousness.get_modified_files_report()\n        print(report)\n    \n    elif args.command == 'evolve':\n        from evolution_team import get_evolution_team\n        team = get_evolution_team()\n        \n        task = ' '.join(args.task) if args.task else \"improve system performance\"\n        print(f\"Running evolution analysis on: {task}\")\n        print()\n        \n        result = team.run_analysis(task)\n        print(team.display_result(result))\n    \n    elif args.command == 'metrics':\n        from lightweight_metrics import get_lightweight_metrics\n        metrics = get_lightweight_metrics()\n        \n        if args.metrics_cmd == 'show':\n            stats = metrics.get_quick_stats()\n            print(\"=\"*60)\n            print(\"\ud83d\udcca LIGHTWEIGHT METRICS\")\n            print(\"=\"*60)\n            print(f\"Samples collected: {stats['samples_collected']}\")\n            print(f\"Enabled: {stats['enabled']}\")\n            print(f\"Metrics tracked: {', '.join(stats['metrics_tracked'])}\")\n            \n            print(\"\\nTrends:\")\n            for metric in [\"cpu_percent\", \"memory_percent\"]:\n                trend = metrics.get_trend(metric)\n                print(f\"  {metric}: {trend['trend']} ({trend.get('value', 0):.1f}%)\")\n        \n        elif args.metrics_cmd == 'health':\n            print(\"Collecting samples for health report...\")\n            start = time.time()\n            while time.time() - start < 3:\n                metrics.sample()\n                time.sleep(0.1)\n            \n            health = metrics.get_health_report()\n            print(\"=\"*60)\n            print(\"\ud83c\udfe5 SYSTEM HEALTH REPORT\")\n            print(\"=\"*60)\n            print(f\"Timestamp: {health['timestamp']}\")\n            print(f\"Healthy: {health['healthy']}\")\n            print(f\"CPU trend: {health['metrics']['cpu']['trend']}\")\n            print(f\"Memory trend: {health['metrics']['memory']['trend']}\")\n            if health['warnings']:\n                print(\"\\nWarnings:\")\n                for w in health['warnings']:\n                    print(f\"  \u26a0\ufe0f {w}\")\n    \n    else:\n        parser.print_help()\n\n\nif __name__ == \"__main__\":\n    main()\n",
  "checksum": "cb3bcff7199934b77adc71b40204a5657d6f5a06da9d714a746ffe72c26c1805",
  "created_at": "2026-01-14T21:35:50.228583",
  "version": "1.0"
}